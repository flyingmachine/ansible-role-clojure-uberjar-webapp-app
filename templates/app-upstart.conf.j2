start on runlevel [2345]

start on (started network-interface
or started network-manager
or started networking)
 
stop on (stopping network-interface
or stopping network-manager
or stopping networking)
 
respawn

script
  set -a
  . {{ clojure_uberjar_webapp_app_http_env_path }}
  
  {%- if datomic_uri is defined %}
  
  . {{ clojure_uberjar_webapp_datomic_env_path }}
  {%- endif %}
  
  {%- if app_env_local_file.stat.exists %}
  
  . {{ clojure_uberjar_webapp_app_env_path }}
  {%- endif %}


  {{ clojure_uberjar_webapp_app_command }}
end script

stop on runlevel [016]